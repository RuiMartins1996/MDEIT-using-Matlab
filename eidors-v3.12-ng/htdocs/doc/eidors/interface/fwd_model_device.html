<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of fwd_model_device</title>
  <meta name="keywords" content="fwd_model_device">
  <meta name="description" content="FMDL_MODEL_DEVICE: set vendor/device specific parameters">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="../index.html">eidors</a> &gt; <a href="index.html">interface</a> &gt; fwd_model_device.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for eidors/interface&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>fwd_model_device
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>FMDL_MODEL_DEVICE: set vendor/device specific parameters</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function fmdl = fmdl_model_device(fmdl,device, opt); </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> FMDL_MODEL_DEVICE: set vendor/device specific parameters
 fmdl_model_device is a utility function to set vendor and device specific parameters.
 It sets the 'stimulation' and 'normalize_measurements' fields to the vendor-typical values

 Usage:
 fmdl = fmdl_model_device(fmdl,device, opt);
 
 Devices and Options:
  Draeger/Pulmovista:
    - sets adjacent, rotate_meas, and mdl_normalize=true
  Sentec/Swisstom
    - Default: opt.skip = 4; opt.next = 1;
    - sets skip pattern, meas_current_next, and mdl_normalize=false</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="fwd_model_device.html" class="code" title="function fmdl = fmdl_model_device(fmdl,device, opt);">fwd_model_device</a>	FMDL_MODEL_DEVICE: set vendor/device specific parameters</li><li><a href="../../eidors/models/mdl_normalize.html" class="code" title="function out = mdl_normalize(mdl, val)">mdl_normalize</a>	MDL_NORMALIZE Check or set the normalize_measurements flag on a model.</li><li><a href="../../eidors/models/mk_common_model.html" class="code" title="function inv_mdl= mk_common_model( str, n_elec, varargin )">mk_common_model</a>	MK_COMMON_MODEL: make common EIT models</li><li><a href="../../eidors/models/mk_stim_patterns.html" class="code" title="function [stim, meas_sel]= mk_stim_patterns(n_elec, n_rings, inj, meas, options, amplitude)">mk_stim_patterns</a>	MK_STIM_PATTERNS: create an EIDORS stimulation pattern structure</li><li><a href="../../eidors/models/stim_meas_list.html" class="code" title="function [stim, meas_sel]= stim_meas_list( sp_mp , Nelec, current, gain);">stim_meas_list</a>	STIM_MEAS_LIST: mk stimulation pattern from list of electrodes</li><li><a href="../../eidors/tools/unit_test_cmp.html" class="code" title="function res = unit_test_cmp(txt,a,b,tol)">unit_test_cmp</a>	UNIT_TEST_CMP: compare matrices in eidors output</li></ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="fwd_model_device.html" class="code" title="function fmdl = fmdl_model_device(fmdl,device, opt);">fwd_model_device</a>	FMDL_MODEL_DEVICE: set vendor/device specific parameters</li></ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function do_unit_test</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function fmdl = fmdl_model_device(fmdl,device, opt);</a>
0002 <span class="comment">% FMDL_MODEL_DEVICE: set vendor/device specific parameters</span>
0003 <span class="comment">% fmdl_model_device is a utility function to set vendor and device specific parameters.</span>
0004 <span class="comment">% It sets the 'stimulation' and 'normalize_measurements' fields to the vendor-typical values</span>
0005 <span class="comment">%</span>
0006 <span class="comment">% Usage:</span>
0007 <span class="comment">% fmdl = fmdl_model_device(fmdl,device, opt);</span>
0008 <span class="comment">%</span>
0009 <span class="comment">% Devices and Options:</span>
0010 <span class="comment">%  Draeger/Pulmovista:</span>
0011 <span class="comment">%    - sets adjacent, rotate_meas, and mdl_normalize=true</span>
0012 <span class="comment">%  Sentec/Swisstom</span>
0013 <span class="comment">%    - Default: opt.skip = 4; opt.next = 1;</span>
0014 <span class="comment">%    - sets skip pattern, meas_current_next, and mdl_normalize=false</span>
0015 
0016 <span class="comment">% (C) 2024 Andy Adler License: GPL ver 2 or 3</span>
0017 <span class="comment">% $Id: fwd_model_device.m 7002 2024-11-24 13:11:35Z aadler $</span>
0018 
0019 <span class="keyword">if</span> ischar(fmdl) &amp;&amp; strcmp(fmdl,<span class="string">'UNIT_TEST'</span>); <a href="#_sub1" class="code" title="subfunction do_unit_test">do_unit_test</a>(); <span class="keyword">return</span>; <span class="keyword">end</span>
0020 
0021 <span class="keyword">if</span> nargin&lt;3; opt=struct(); <span class="keyword">end</span>
0022 
0023 <span class="keyword">switch</span> lower(device)
0024   <span class="keyword">case</span> {<span class="string">'draeger'</span>,<span class="string">'dr√§ger'</span>,<span class="string">'pulmovista500'</span>}
0025     fmdl=<a href="../../eidors/models/mdl_normalize.html" class="code" title="function out = mdl_normalize(mdl, val)">mdl_normalize</a>(fmdl,true);
0026     mA = 0.01; <span class="comment">% Estimate from docs</span>
0027     fmdl.stimulation = <a href="../../eidors/models/mk_stim_patterns.html" class="code" title="function [stim, meas_sel]= mk_stim_patterns(n_elec, n_rings, inj, meas, options, amplitude)">mk_stim_patterns</a>(16,1, <span class="keyword">...</span>
0028        [0,1],[0,1],{<span class="string">'no_meas_current'</span>,<span class="string">'rotate_meas'</span>},mA);
0029 
0030   <span class="keyword">case</span> {<span class="string">'sentec'</span>,<span class="string">'swisstom'</span>}
0031 
0032     <span class="keyword">if</span> ~isfield(opt,<span class="string">'skip'</span>); opt.skip = 4; <span class="keyword">end</span>
0033     <span class="keyword">if</span> ~isfield(opt,<span class="string">'next'</span>); opt.next = 1; <span class="keyword">end</span>
0034     fmdl=<a href="../../eidors/models/mdl_normalize.html" class="code" title="function out = mdl_normalize(mdl, val)">mdl_normalize</a>(fmdl,false);
0035     mA = 0.01; <span class="comment">% Estimate from docs</span>
0036     SS = [0,opt.skip+1];
0037     fmdl.stimulation = <a href="../../eidors/models/mk_stim_patterns.html" class="code" title="function [stim, meas_sel]= mk_stim_patterns(n_elec, n_rings, inj, meas, options, amplitude)">mk_stim_patterns</a>(32,1, <span class="keyword">...</span>
0038        SS,SS,{sprintf(<span class="string">'no_meas_current_next%d'</span>,opt.next)},mA);
0039 
0040   <span class="keyword">otherwise</span> error(<span class="string">'No information about device'</span>);
0041 <span class="keyword">end</span>
0042 
0043 <a name="_sub1" href="#_subfunctions" class="code">function do_unit_test</a>
0044    fmdl = getfield(<a href="../../eidors/models/mk_common_model.html" class="code" title="function inv_mdl= mk_common_model( str, n_elec, varargin )">mk_common_model</a>(<span class="string">'a2c2'</span>,16), <span class="keyword">...</span>
0045                    <span class="string">'fwd_model'</span>);
0046    ssmm = <a href="../../eidors/models/stim_meas_list.html" class="code" title="function [stim, meas_sel]= stim_meas_list( sp_mp , Nelec, current, gain);">stim_meas_list</a>(fmdl.stimulation);
0047    <a href="../../eidors/tools/unit_test_cmp.html" class="code" title="function res = unit_test_cmp(txt,a,b,tol)">unit_test_cmp</a>(<span class="string">'Init'</span>,ssmm([8,35],:), [
0048        1  2 11 10; 3  4 13 12]);
0049 
0050    fmdl = <a href="fwd_model_device.html" class="code" title="function fmdl = fmdl_model_device(fmdl,device, opt);">fwd_model_device</a>(fmdl,<span class="string">'Draeger'</span>);
0051    ssmm = <a href="../../eidors/models/stim_meas_list.html" class="code" title="function [stim, meas_sel]= stim_meas_list( sp_mp , Nelec, current, gain);">stim_meas_list</a>(fmdl.stimulation);
0052    <a href="../../eidors/tools/unit_test_cmp.html" class="code" title="function res = unit_test_cmp(txt,a,b,tol)">unit_test_cmp</a>(<span class="string">'Draeger'</span>,size(ssmm,1),208);
0053    <a href="../../eidors/tools/unit_test_cmp.html" class="code" title="function res = unit_test_cmp(txt,a,b,tol)">unit_test_cmp</a>(<span class="string">'Draeger'</span>,ssmm([8,35],:), [
0054        1  2 11 10; 3  4 14 13]);
0055    <a href="../../eidors/tools/unit_test_cmp.html" class="code" title="function res = unit_test_cmp(txt,a,b,tol)">unit_test_cmp</a>(<span class="string">'Draeger'</span>,fmdl.normalize_measurements, true);
0056 
0057  
0058    fmdl = getfield(<a href="../../eidors/models/mk_common_model.html" class="code" title="function inv_mdl= mk_common_model( str, n_elec, varargin )">mk_common_model</a>(<span class="string">'b2c2'</span>,32), <span class="keyword">...</span>
0059                    <span class="string">'fwd_model'</span>);
0060    fmdl = <a href="fwd_model_device.html" class="code" title="function fmdl = fmdl_model_device(fmdl,device, opt);">fwd_model_device</a>(fmdl,<span class="string">'Sentec'</span>);
0061    ssmm = <a href="../../eidors/models/stim_meas_list.html" class="code" title="function [stim, meas_sel]= stim_meas_list( sp_mp , Nelec, current, gain);">stim_meas_list</a>(fmdl.stimulation);
0062    <a href="../../eidors/tools/unit_test_cmp.html" class="code" title="function res = unit_test_cmp(txt,a,b,tol)">unit_test_cmp</a>(<span class="string">'Sentec'</span>,size(ssmm,1),736);
0063    <a href="../../eidors/tools/unit_test_cmp.html" class="code" title="function res = unit_test_cmp(txt,a,b,tol)">unit_test_cmp</a>(<span class="string">'Sentec'</span>,ssmm([8,35],:), [
0064        1  6 18 13; 2  7 23 18]);
0065    <a href="../../eidors/tools/unit_test_cmp.html" class="code" title="function res = unit_test_cmp(txt,a,b,tol)">unit_test_cmp</a>(<span class="string">'Sentec'</span>,fmdl.normalize_measurements, false);
0066 
0067    opt.skip=2;
0068    fmdl = <a href="fwd_model_device.html" class="code" title="function fmdl = fmdl_model_device(fmdl,device, opt);">fwd_model_device</a>(fmdl,<span class="string">'Sentec'</span>,opt);
0069    ssmm = <a href="../../eidors/models/stim_meas_list.html" class="code" title="function [stim, meas_sel]= stim_meas_list( sp_mp , Nelec, current, gain);">stim_meas_list</a>(fmdl.stimulation);
0070    <a href="../../eidors/tools/unit_test_cmp.html" class="code" title="function res = unit_test_cmp(txt,a,b,tol)">unit_test_cmp</a>(<span class="string">'Sentec'</span>,size(ssmm,1),736);
0071    <a href="../../eidors/tools/unit_test_cmp.html" class="code" title="function res = unit_test_cmp(txt,a,b,tol)">unit_test_cmp</a>(<span class="string">'Sentec'</span>,ssmm([8,35],:), [
0072        1  4 16 13; 2  5 21 18]);
0073 
0074    opt.next=2;
0075    fmdl = <a href="fwd_model_device.html" class="code" title="function fmdl = fmdl_model_device(fmdl,device, opt);">fwd_model_device</a>(fmdl,<span class="string">'Sentec'</span>,opt);
0076    ssmm = <a href="../../eidors/models/stim_meas_list.html" class="code" title="function [stim, meas_sel]= stim_meas_list( sp_mp , Nelec, current, gain);">stim_meas_list</a>(fmdl.stimulation);
0077    <a href="../../eidors/tools/unit_test_cmp.html" class="code" title="function res = unit_test_cmp(txt,a,b,tol)">unit_test_cmp</a>(<span class="string">'Sentec'</span>,size(ssmm,1),672);
0078    <a href="../../eidors/tools/unit_test_cmp.html" class="code" title="function res = unit_test_cmp(txt,a,b,tol)">unit_test_cmp</a>(<span class="string">'Sentec'</span>,ssmm([8,35],:), [
0079        1  4 17 14; 2  5 24 21]);</pre></div>
<hr><address>Generated on Sun 29-Dec-2024 19:54:43 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>